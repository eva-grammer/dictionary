<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="Description" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/vue.css" />
  </head>
  <body>
    <div id="app"></div>
    <audio data-v-10011608="" id="musicPlayer" preload="auto" controls="controls" src="blob:http://wap.mhuoba.com/64fd2eda-693f-4bba-9c26-0059df19232a" ></audio>
    <script>
      window.$docsify = {
        name: "",
        repo: "",
        loadSidebar: true,
        auto2top: true,
         autoHeader: true, 
      };
    </script>
    <script src="//unpkg.com/docsify/lib/docsify.min.js"></script>
    <script>
   let currentAudio = null;
const loopCount = 50;
let currentLoopCount = 0;
let lastElement = null;

function stopPlay(element) {

    if (!element) return;
   currentLoopCount=loopCount+2;
    element.innerText = element.oldText;
    if (currentAudio != null) {
        currentAudio.pause();
    }

}
function startPlay(element) {

    stopPlay(lastElement);
    lastElement = element;
    element.oldText = element.innerText;
    element.innerText = "停止";

}
onmousedown = function (event) {
    var url = event.srcElement.href;
    var innerText = event.srcElement.innerText;
    if (innerText == "停止") {
        event.preventDefault();
        event.srcElement.onclick = function (e) {
            e.preventDefault();
            return false;
        };
        stopPlay(event.srcElement);
        return false;
    }


    let isBoFang = url && (innerText == "播放" || innerText == "英音" || innerText == "美音");

    if (isBoFang) {
        event.preventDefault();
        event.srcElement.onclick = function (e) {
            e.preventDefault();
            return false;
        };

        startPlay(event.srcElement);
        currentAudio = new Audio(url);
        currentLoopCount = 0;
        let timeOUt = 500;
        if (innerText == "播放") {
            timeOUt = 1000;
        }
        currentAudio.onended = function () {
            if (currentLoopCount < loopCount) {
                currentLoopCount++;
                setTimeout((v) => currentAudio.play(), timeOUt);
            } else {
                stopPlay(lastElement);
            }
        };
        currentAudio.play();
        return false;
    }
};


    </script>
  </body>
</html>
